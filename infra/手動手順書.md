# AWS æ‰‹å‹•æ§‹ç¯‰æ‰‹é †æ›¸

education-reserve ã‚’ AWS ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †ã§ã™ã€‚

## ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ ALB (HTTP:80) â†’ EC2 (Docker Compose: Nginx + Gunicorn) â†’ RDS (PostgreSQL)
```

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ã‚µãƒ¼ãƒ“ã‚¹ | èª¬æ˜ |
|--------------|---------|------|
| ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ | ALB | HTTP:80 ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ã‚‹ |
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | EC2 (t3.micro) | Docker Compose ã§ Nginx + Django ã‚’å®Ÿè¡Œ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | RDS (PostgreSQL 16) | Private Subnet ã«é…ç½® |

## 1. VPC

VPC ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€ŒVPC ã‚’ä½œæˆã€

| é …ç›® | å€¤ |
|------|-----|
| ä½œæˆã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ | VPC ã®ã¿ |
| åå‰ | education-reserve-vpc |
| IPv4 CIDR | 10.0.0.0/16 |

## 2. ã‚µãƒ–ãƒãƒƒãƒˆ

VPC ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œã‚µãƒ–ãƒãƒƒãƒˆã€â†’ã€Œã‚µãƒ–ãƒãƒƒãƒˆã‚’ä½œæˆã€

VPC ã¯ `education-reserve-vpc` ã‚’é¸æŠã—ã€4ã¤ä½œæˆã™ã‚‹ã€‚

| åå‰ | CIDR | AZ | ç”¨é€” |
|------|------|-----|------|
| education-reserve-public-1 | 10.0.1.0/24 | ap-northeast-1a | EC2 + ALB |
| education-reserve-public-2 | 10.0.2.0/24 | ap-northeast-1c | ALBï¼ˆ2AZ å¿…é ˆï¼‰ |
| education-reserve-private-1 | 10.0.3.0/24 | ap-northeast-1a | RDS |
| education-reserve-private-2 | 10.0.4.0/24 | ap-northeast-1c | RDSï¼ˆ2AZ å¿…é ˆï¼‰ |

> **è£œè¶³**: ALB ã¨ RDS ã¯ã©ã¡ã‚‰ã‚‚ AWS ã®ä»•æ§˜ã§ 2 ã¤ä»¥ä¸Šã® AZ ãŒå¿…è¦ã§ã™ã€‚

## 3. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤

VPC ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã€â†’ã€Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã®ä½œæˆã€

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-igw |

ä½œæˆå¾Œã€ã€Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€â†’ã€ŒVPC ã«ã‚¢ã‚¿ãƒƒãƒã€â†’ `education-reserve-vpc` ã‚’é¸æŠã€‚

> **è£œè¶³**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã¯ VPC ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã¨é€šä¿¡ã™ã‚‹ãŸã‚ã«å¿…é ˆã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚

## 4. ãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«

VPC ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã€â†’ã€Œãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆã€

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-public-rt |
| VPC | education-reserve-vpc |

### ãƒ«ãƒ¼ãƒˆã‚’è¿½åŠ 

ã€Œãƒ«ãƒ¼ãƒˆã€ã‚¿ãƒ– â†’ã€Œãƒ«ãƒ¼ãƒˆã‚’ç·¨é›†ã€â†’ã€Œãƒ«ãƒ¼ãƒˆã‚’è¿½åŠ ã€

| é€ä¿¡å…ˆ | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ |
|--------|-----------|
| 0.0.0.0/0 | education-reserve-igw |

> **è£œè¶³**: ã“ã®ãƒ«ãƒ¼ãƒˆã«ã‚ˆã‚Šã€Public Subnet ã‹ã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã¸ã®é€šä¿¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚Private Subnet ã«ã¯ã“ã®ãƒ«ãƒ¼ãƒˆãŒãªã„ãŸã‚ã€å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚

### ã‚µãƒ–ãƒãƒƒãƒˆã®é–¢é€£ä»˜ã‘

ã€Œã‚µãƒ–ãƒãƒƒãƒˆã®é–¢é€£ä»˜ã‘ã€ã‚¿ãƒ– â†’ã€Œã‚µãƒ–ãƒãƒƒãƒˆã®é–¢é€£ä»˜ã‘ã‚’ç·¨é›†ã€â†’ ä»¥ä¸‹ 2 ã¤ã«ãƒã‚§ãƒƒã‚¯ï¼š

- education-reserve-public-1
- education-reserve-public-2

> **æ³¨æ„**: Private Subnet ã¯é–¢é€£ä»˜ã‘ãªã„ã€‚

## 5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—

VPC ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã€â†’ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã€

3 ã¤ä½œæˆã™ã‚‹ã€‚

### ALB ç”¨

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-alb-sg |
| VPC | education-reserve-vpc |
| ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ | HTTP(80) / ã‚½ãƒ¼ã‚¹: 0.0.0.0/0 |

### EC2 ç”¨

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-ec2-sg |
| VPC | education-reserve-vpc |
| ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ 1 | HTTP(80) / ã‚½ãƒ¼ã‚¹: education-reserve-alb-sg |
| ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ 2 | SSH(22) / ã‚½ãƒ¼ã‚¹: ãƒã‚¤ IP âš ï¸ |

> **âš ï¸ ãƒã‚¤ IP**: è‡ªåˆ†ã®ç¾åœ¨ã®ã‚°ãƒ­ãƒ¼ãƒãƒ« IP ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™ã€‚SSH æ¥ç¶šã«å¿…è¦ãªã®ã§ã€IP ãŒå¤‰ã‚ã£ãŸå ´åˆã¯ã“ã“ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

### RDS ç”¨

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-rds-sg |
| VPC | education-reserve-vpc |
| ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ | PostgreSQL(5432) / ã‚½ãƒ¼ã‚¹: education-reserve-ec2-sg |

> **è£œè¶³**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã¯ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã®å½¹å‰²ã‚’æŒã¡ã¾ã™ã€‚ALB ã¯å…¨ä¸–ç•Œã‹ã‚‰ HTTP ã‚’å—ã‘ã€EC2 ã¯ ALB ã‹ã‚‰ã® HTTP ã®ã¿ + è‡ªåˆ†ã® IP ã‹ã‚‰ SSH ã®ã¿ã€RDS ã¯ EC2 ã‹ã‚‰ã® PostgreSQL ã®ã¿è¨±å¯ã™ã‚‹æ§‹æˆã§ã™ã€‚

## 6. RDS

RDS ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œã‚µãƒ–ãƒãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã€â†’ã€ŒDB ã‚µãƒ–ãƒãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã€

### ã‚µãƒ–ãƒãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-db-subnet |
| èª¬æ˜ | education-reserve RDS subnet group |
| VPC | education-reserve-vpc |
| AZ | ap-northeast-1a ã¨ ap-northeast-1c |
| ã‚µãƒ–ãƒãƒƒãƒˆ | education-reserve-private-1 ã¨ education-reserve-private-2 |

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆ

RDS ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆã€

| é …ç›® | å€¤ |
|------|-----|
| ä½œæˆæ–¹æ³• | æ¨™æº–ä½œæˆ |
| ã‚¨ãƒ³ã‚¸ãƒ³ | PostgreSQL |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | ç„¡æ–™åˆ©ç”¨æ  |
| DB ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹è­˜åˆ¥å­ | education-reserve-db |
| ãƒã‚¹ã‚¿ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼å | postgres |
| ãƒã‚¹ã‚¿ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ | ï¼ˆä»»æ„ã€‚âš ï¸ å¾Œã§ EC2 ã® .env.docker ã«è¨­å®šã™ã‚‹ã®ã§å¿…ãšãƒ¡ãƒ¢ï¼‰ |
| ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¯ãƒ©ã‚¹ | db.t3.micro |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | 20 GiB |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚° | ç„¡åŠ¹ |
| VPC | education-reserve-vpc |
| DB ã‚µãƒ–ãƒãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ— | education-reserve-db-subnet |
| ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚»ã‚¹ | ãªã— |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ— | education-reserve-rds-sg |
| åˆæœŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å | education_reserve |
| è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | ç„¡åŠ¹ |

> **âš ï¸ è£œè¶³**: ä½œæˆã« 5ã€œ10 åˆ†ã‹ã‹ã‚Šã¾ã™ã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€Œåˆ©ç”¨å¯èƒ½ã€ã«ãªã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚ä½œæˆå¾Œã€ã€Œæ¥ç¶šã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚¿ãƒ–ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆä¾‹: `education-reserve-db.xxxxx.ap-northeast-1.rds.amazonaws.com`ï¼‰ã‚’**å¿…ãšãƒ¡ãƒ¢ã—ã¦ãã ã•ã„ã€‚å¾Œã§ EC2 ã® .env.docker ã«è¨­å®šã—ã¾ã™ã€‚**

## 7. EC2

EC2 ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’èµ·å‹•ã€

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-ec2 |
| AMI | Amazon Linux 2023 |
| ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ— | t3.micro |
| ã‚­ãƒ¼ãƒšã‚¢ | æ–°è¦ä½œæˆ â†’ `education-reserve-key`ï¼ˆ.pem ã§ä¿å­˜ï¼‰ |
| VPC | education-reserve-vpc |
| ã‚µãƒ–ãƒãƒƒãƒˆ | education-reserve-public-1 |
| ãƒ‘ãƒ–ãƒªãƒƒã‚¯ IP ã®è‡ªå‹•å‰²ã‚Šå½“ã¦ | æœ‰åŠ¹ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ— | education-reserve-ec2-sg |

> **æ³¨æ„**: ã‚­ãƒ¼ãƒšã‚¢ã® .pem ãƒ•ã‚¡ã‚¤ãƒ«ã¯ SSH æ¥ç¶šã«å¿…è¦ã§ã™ã€‚ç´›å¤±ã™ã‚‹ã¨ EC2 ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªããªã‚Šã¾ã™ã€‚

### SSH æ¥ç¶š

```bash
ssh -i education-reserve-key.pem ec2-user@<EC2ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯IP>
```

> **è£œè¶³**:
> - `ec2-user` ã¯ Amazon Linux 2023 ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼åã§ã™ã€‚
> - ãƒ‘ãƒ–ãƒªãƒƒã‚¯ IP ã¯ EC2 ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã€Œãƒ‘ãƒ–ãƒªãƒƒã‚¯ IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
> - åˆå›æ¥ç¶šæ™‚ã« `Are you sure you want to continue connecting?` ã¨èã‹ã‚ŒãŸã‚‰ `yes` ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
> - Linux/Mac ã§æ¨©é™ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã¯ `chmod 400 education-reserve-key.pem` ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### Docker / Docker Compose ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
sudo yum update -y
sudo yum install -y docker git
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker ec2-user
```

Docker Compose:

```bash
sudo mkdir -p /usr/local/lib/docker/cli-plugins
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

Docker Buildx:

```bash
sudo curl -L "https://github.com/docker/buildx/releases/download/v0.21.2/buildx-v0.21.2.linux-amd64" -o /usr/local/lib/docker/cli-plugins/docker-buildx
sudo chmod +x /usr/local/lib/docker/cli-plugins/docker-buildx
```

ä¸€åº¦åˆ‡æ–­ã—ã¦å†æ¥ç¶šï¼ˆdocker ã‚°ãƒ«ãƒ¼ãƒ—ã®åæ˜ ã®ãŸã‚ï¼‰ï¼š

```bash
exit
ssh -i education-reserve-key.pem ec2-user@<EC2ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯IP>
```

ç¢ºèªï¼š

```bash
docker ps
docker-compose --version
docker buildx version
```

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
git clone https://github.com/tomokisuzuki/education-reserve.git
cd education-reserve
```

ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆâš ï¸ RDS ä½œæˆæ™‚ã«ãƒ¡ãƒ¢ã—ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã“ã“ã§ä½¿ã„ã¾ã™ï¼‰ï¼š

```bash
cat << 'EOF' > .env.docker
SECRET_KEY=your-secret-key-here
ALLOWED_HOSTS=*
DB_NAME=education_reserve
DB_USER=postgres
DB_PASSWORD=<âš ï¸ RDSä½œæˆæ™‚ã«è¨­å®šã—ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰>
DB_HOST=<âš ï¸ RDSã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ>
DB_PORT=5432
EOF
```

ãƒ“ãƒ«ãƒ‰ï¼†èµ·å‹•ï¼š

```bash
docker-compose -f docker-compose.prod.yml up --build -d
```

ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆï¼š

```bash
docker-compose -f docker-compose.prod.yml exec app python manage.py createsuperuser --settings=config.settings_prod
```

## 8. ALB

EC2 ã‚³ãƒ³ã‚½ãƒ¼ãƒ« â†’ã€Œãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã€â†’ã€Œãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã®ä½œæˆã€â†’ã€ŒApplication Load Balancerã€

### åŸºæœ¬è¨­å®š

| é …ç›® | å€¤ |
|------|-----|
| åå‰ | education-reserve-alb |
| ã‚¹ã‚­ãƒ¼ãƒ  | ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆå‘ã‘ |
| VPC | education-reserve-vpc |
| ãƒãƒƒãƒ”ãƒ³ã‚° | ap-northeast-1aï¼ˆpublic-1ï¼‰ã¨ ap-northeast-1cï¼ˆpublic-2ï¼‰ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ— | education-reserve-alb-sg |

### ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã®ä½œæˆ

| é …ç›® | å€¤ |
|------|-----|
| ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¿ã‚¤ãƒ— | ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ |
| åå‰ | education-reserve-tg |
| ãƒ—ãƒ­ãƒˆã‚³ãƒ« | HTTP |
| ãƒãƒ¼ãƒˆ | 80 |
| VPC | education-reserve-vpc |
| ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ‘ã‚¹ | /admin/login/ |

ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã« `education-reserve-ec2` ã‚’è¿½åŠ ã™ã‚‹ã€‚

> **è£œè¶³**: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é¸æŠå¾Œã€Œä¿ç•™ä¸­ã¨ã—ã¦ä»¥ä¸‹ã«å«ã‚ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‹ã‚‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

### ãƒªã‚¹ãƒŠãƒ¼

| é …ç›® | å€¤ |
|------|-----|
| ãƒ—ãƒ­ãƒˆã‚³ãƒ« | HTTP |
| ãƒãƒ¼ãƒˆ | 80 |
| ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | ä¸Šè¨˜ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã¸è»¢é€ |

## 9. å‹•ä½œç¢ºèª

ALB ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ DNS åã‚’ç¢ºèªï¼ˆä¾‹: `education-reserve-alb-xxxxx.ap-northeast-1.elb.amazonaws.com`ï¼‰ã€‚

> **ğŸ‰ ã“ã® DNS åãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ URL ã«ãªã‚Šã¾ã™ï¼** ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã™ã‚‹ã¾ã§ã¯ã“ã® ALB ã® DNS åãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¬é–‹ URL ã§ã™ã€‚

| ç”»é¢ | URL |
|------|-----|
| Admin ç”»é¢ | http://<ALBã®DNSå>/admin/ |
| Swagger UI | http://<ALBã®DNSå>/api/docs/ |

## ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤ï¼ˆã‚³ã‚¹ãƒˆå¯¾ç­–ï¼‰

ä½¿ç”¨ã—ãªã„ã¨ãã¯ä»¥ä¸‹ã®é †ç•ªã§å‰Šé™¤ã—ã¦ãã ã•ã„ï¼ˆä¾å­˜é–¢ä¿‚ã®é€†é †ï¼‰ï¼š

1. ALB â†’ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—
2. EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
3. RDS ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆALB â†’ EC2 â†’ RDS ã®é †ï¼‰
5. ã‚µãƒ–ãƒãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—
6. ã‚µãƒ–ãƒãƒƒãƒˆ
7. ãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«
8. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ï¼ˆVPC ã‹ã‚‰ãƒ‡ã‚¿ãƒƒãƒ â†’ å‰Šé™¤ï¼‰
9. VPC

> **æ³¨æ„**: EC2 ã¨ RDS ã¯èµ·å‹•ã—ã¦ã„ã‚‹ã ã‘ã§èª²é‡‘ã•ã‚Œã¾ã™ã€‚é–‹ç™ºä¸­ã¯ EC2 ã‚’åœæ­¢ã€ä½¿ã‚ãªããªã£ãŸã‚‰ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚

## æœ¬ç•ªé‹ç”¨ã§ã®æ”¹å–„ç‚¹

- CloudFront + ACM ã§ HTTPS åŒ–
- Route53 ã§ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š
- WAF ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
- ECR ã«ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ push ã—ã¦ EC2 ã‹ã‚‰ pull ã™ã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼
- EC2 ã® UserData ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è‡ªå‹•åŒ–
- CloudFormation ã§ IaC åŒ–ï¼ˆ`infra/cloudformation.yml` ã«è¿½åŠ äºˆå®šï¼‰